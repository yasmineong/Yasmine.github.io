<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Yasmine.githhub.io - About</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Yasmine.githhub.io</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./about.html" rel="" target="" aria-current="page">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#dataset" id="toc-dataset" class="nav-link active" data-scroll-target="#dataset">Dataset</a></li>
  <li><a href="#tidying-data" id="toc-tidying-data" class="nav-link" data-scroll-target="#tidying-data">Tidying data</a>
  <ul class="collapse">
  <li><a href="#analysis-summary" id="toc-analysis-summary" class="nav-link" data-scroll-target="#analysis-summary">Analysis (summary)</a></li>
  <li><a href="#background-into-indias-car-market" id="toc-background-into-indias-car-market" class="nav-link" data-scroll-target="#background-into-indias-car-market">Background into India’s car market</a></li>
  <li><a href="#lemon-market-how-high-are-the-prices-of-second-hand-cars-in-india" id="toc-lemon-market-how-high-are-the-prices-of-second-hand-cars-in-india" class="nav-link" data-scroll-target="#lemon-market-how-high-are-the-prices-of-second-hand-cars-in-india">1. Lemon market: How high are the prices of second-hand cars in India?</a></li>
  <li><a href="#carbon-emissions-average-kilometers-driven-in-india" id="toc-carbon-emissions-average-kilometers-driven-in-india" class="nav-link" data-scroll-target="#carbon-emissions-average-kilometers-driven-in-india">2. Carbon emissions? Average kilometers driven in India</a></li>
  <li><a href="#preferences-and-car-usage-in-india" id="toc-preferences-and-car-usage-in-india" class="nav-link" data-scroll-target="#preferences-and-car-usage-in-india">3. Preferences and car usage in India</a></li>
  <li><a href="#predictors-in-the-market" id="toc-predictors-in-the-market" class="nav-link" data-scroll-target="#predictors-in-the-market">4. Predictors in the market</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">About</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Welcome again!</p>
<p>Stay tuned to see what I will be doing…</p>
<section id="dataset" class="level1">
<h1>Dataset</h1>
<p>For my analysis, I will be looking at a dataset about cars that was found on Kaggle: https://www.kaggle.com/datasets/ayushparwal2026/cars-dataset.</p>
<p><strong>Title</strong>: Cars Dataset</p>
<p><strong>Description</strong>: The Cars Dataset contains information about various car models, including their specifications and pricing details in certain parts of India. It a collection of attributes related to different car models, possibly intended for analysis, modeling, or machine learning tasks related to the automotive industry.</p>
<p><strong>Attributes</strong>:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>.  Brand &amp; Model
 . Location: Certain cities in India
 . Year
 . Kilometers driven
 . Fuel type
 . Transmission type
 . Owner type
 . Mileage: How many kilometers the vehicle can travel per litre of fuel
 . Engine: Measured in cubic capacity (CC). It refers to the amount of air and fuel that can be pushed through the cylinders in the engine. In most cases, the bigger the capacity, the more powerful the vehicle.
 . Power: Measured in brake horsepower (BHP). It refers to the horsepower of the car after accounting for the frictional losses in power from the engine. Generally, a higher BHP means increased speed, strength, and overall capabilities on the road. 
 . Number of seats
 . Price: 1 Lakh = 100,000</code></pre>
</div>
</div>
<p><strong>Potential Use Cases</strong>: This dataset could be used for various analytical purposes, including:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>.  Exploratory data analysis (EDA) to understand trends and patterns in the automotive market.
 . Predictive modeling to estimate car prices based on their specifications.
 . Classification tasks to predict car types or fuel efficiency based on attributes.
 . Market research to understand consumer preferences and buying behavior in the automotive industry.
 . Academic research in fields like transportation engineering, automotive engineering, data science, and machine learning.
 . Product development
 . Risk assessment</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.4.4     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 7,253
Columns: 14
$ S.No.             &lt;int&gt; 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15…
$ Name              &lt;chr&gt; "Maruti Wagon R LXI CNG", "Hyundai Creta 1.6 CRDi SX…
$ Location          &lt;chr&gt; "Mumbai", "Pune", "Chennai", "Chennai", "Coimbatore"…
$ Year              &lt;int&gt; 2010, 2015, 2011, 2012, 2013, 2012, 2013, 2016, 2013…
$ Kilometers_Driven &lt;int&gt; 72000, 41000, 46000, 87000, 40670, 75000, 86999, 360…
$ Fuel_Type         &lt;chr&gt; "CNG", "Diesel", "Petrol", "Diesel", "Diesel", "LPG"…
$ Transmission      &lt;chr&gt; "Manual", "Manual", "Manual", "Manual", "Automatic",…
$ Owner_Type        &lt;chr&gt; "First", "First", "First", "First", "Second", "First…
$ Mileage           &lt;chr&gt; "26.6 km/kg", "19.67 kmpl", "18.2 kmpl", "20.77 kmpl…
$ Engine            &lt;chr&gt; "998 CC", "1582 CC", "1199 CC", "1248 CC", "1968 CC"…
$ Power             &lt;chr&gt; "58.16 bhp", "126.2 bhp", "88.7 bhp", "88.76 bhp", "…
$ Seats             &lt;int&gt; 5, 5, 5, 7, 5, 5, 5, 8, 5, 5, 5, 5, 5, 5, 5, 7, 5, 5…
$ New_Price         &lt;chr&gt; "", "", "8.61 Lakh", "", "", "", "", "21 Lakh", "", …
$ Price             &lt;dbl&gt; 1.75, 12.50, 4.50, 6.00, 17.74, 2.35, 3.50, 17.50, 5…</code></pre>
</div>
</div>
</section>
<section id="tidying-data" class="level1">
<h1>Tidying data</h1>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Expected 2 pieces. Missing pieces filled with `NA` in 2 rows [4447,
4905].</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `mutate()`.
ℹ In argument: `Power/bhp = as.numeric(str_remove(Power, "bhp"))`.
Caused by warning:
! NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 7,253
Columns: 16
$ Brand             &lt;chr&gt; "Maruti", "Hyundai", "Honda", "Maruti", "Audi", "Hyu…
$ Model             &lt;chr&gt; "Wagon R LXI CNG", "Creta 1.6 CRDi SX Option", "Jazz…
$ Location          &lt;chr&gt; "Mumbai", "Pune", "Chennai", "Chennai", "Coimbatore"…
$ Year              &lt;int&gt; 2010, 2015, 2011, 2012, 2013, 2012, 2013, 2016, 2013…
$ Car_age           &lt;dbl&gt; 14, 9, 13, 12, 11, 12, 11, 8, 11, 12, 6, 12, 9, 10, …
$ Kilometers_Driven &lt;int&gt; 72000, 41000, 46000, 87000, 40670, 75000, 86999, 360…
$ Fuel_Type         &lt;chr&gt; "CNG", "Diesel", "Petrol", "Diesel", "Diesel", "LPG"…
$ Transmission      &lt;chr&gt; "Manual", "Manual", "Manual", "Manual", "Automatic",…
$ Owner_Type        &lt;chr&gt; "First", "First", "First", "First", "Second", "First…
$ Mileage_value     &lt;dbl&gt; 26.60, 19.67, 18.20, 20.77, 15.20, 21.10, 23.08, 11.…
$ Mileage_unit      &lt;chr&gt; "km/kg", "kmpl", "kmpl", "kmpl", "kmpl", "km/kg", "k…
$ `Engine/CC`       &lt;dbl&gt; 998, 1582, 1199, 1248, 1968, 814, 1461, 2755, 1598, …
$ `Power/bhp`       &lt;dbl&gt; 58.16, 126.20, 88.70, 88.76, 140.80, 55.20, 63.10, 1…
$ Seats             &lt;int&gt; 5, 5, 5, 7, 5, 5, 5, 8, 5, 5, 5, 5, 5, 5, 5, 7, 5, 5…
$ New_Price         &lt;chr&gt; "", "", "8.61 Lakh", "", "", "", "", "21 Lakh", "", …
$ Price             &lt;dbl&gt; 1.75, 12.50, 4.50, 6.00, 17.74, 2.35, 3.50, 17.50, 5…</code></pre>
</div>
</div>
<section id="analysis-summary" class="level3">
<h3 class="anchored" data-anchor-id="analysis-summary">Analysis (summary)</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>    Brand              Model             Location              Year     
 Length:7253        Length:7253        Length:7253        Min.   :1996  
 Class :character   Class :character   Class :character   1st Qu.:2011  
 Mode  :character   Mode  :character   Mode  :character   Median :2014  
                                                          Mean   :2013  
                                                          3rd Qu.:2016  
                                                          Max.   :2019  
                                                                        
    Car_age      Kilometers_Driven  Fuel_Type         Transmission      
 Min.   : 5.00   Min.   :    171   Length:7253        Length:7253       
 1st Qu.: 8.00   1st Qu.:  34000   Class :character   Class :character  
 Median :10.00   Median :  53416   Mode  :character   Mode  :character  
 Mean   :10.63   Mean   :  58699                                        
 3rd Qu.:13.00   3rd Qu.:  73000                                        
 Max.   :28.00   Max.   :6500000                                        
                                                                        
  Owner_Type        Mileage_value   Mileage_unit         Engine/CC   
 Length:7253        Min.   : 0.00   Length:7253        Min.   :  72  
 Class :character   1st Qu.:15.17   Class :character   1st Qu.:1198  
 Mode  :character   Median :18.16   Mode  :character   Median :1493  
                    Mean   :18.14                      Mean   :1617  
                    3rd Qu.:21.10                      3rd Qu.:1968  
                    Max.   :33.54                      Max.   :5998  
                    NA's   :2                          NA's   :46    
   Power/bhp         Seats        New_Price             Price       
 Min.   : 34.2   Min.   : 0.00   Length:7253        Min.   :  0.44  
 1st Qu.: 75.0   1st Qu.: 5.00   Class :character   1st Qu.:  3.50  
 Median : 94.0   Median : 5.00   Mode  :character   Median :  5.64  
 Mean   :112.8   Mean   : 5.28                      Mean   :  9.48  
 3rd Qu.:138.1   3rd Qu.: 5.00                      3rd Qu.:  9.95  
 Max.   :616.0   Max.   :10.00                      Max.   :160.00  
 NA's   :175     NA's   :53                         NA's   :1234    </code></pre>
</div>
</div>
<p><br></p>
</section>
<section id="background-into-indias-car-market" class="level3">
<h3 class="anchored" data-anchor-id="background-into-indias-car-market">Background into India’s car market</h3>
<p>When it comes to buying a new car, Indian consumers will root more for mileage than engine power. 60% of buyers want a fuel-efficient car (can be seen through high mileage) and 72% are looking to save money. Indian customers are seriously worried about fluctuating fuel prices and a good 60% don’t expect fuel price stability in the next 12 months (from August 2023). They believe that fuel prices will remain too high hence the choice for a fuel-efficient car to save fuel costs.</p>
<p>Also many of the bigger cities in this region boast 100 million plus population so congestion is a problem. People are realising that power packed vehicles cannot be driven in the cities in this region hence the focus on fuel efficiency.</p>
<p>The lemon market in India is a huge problem due to information asymmetry between buyers and sellers. This asymmetry means that buyers are unable to access sufficient vehicle information, enabling sellers to exploit uninformed buyers by selling lower-quality cars. In summary, market failure (distortions in true value of the product) caused by adverse selection and moral hazard is a significant problem for many innocent buyers in India where cost is an influential factor in decision-making.</p>
<p>Links for reference: https://auto.economictimes.indiatimes.com/news/industry/what-indian-consumers-prefer-the-most-while-buying-a-car/53825945 <br> https://www.atlantis-press.com/article/125971556.pdf <br></p>
</section>
<section id="lemon-market-how-high-are-the-prices-of-second-hand-cars-in-india" class="level3">
<h3 class="anchored" data-anchor-id="lemon-market-how-high-are-the-prices-of-second-hand-cars-in-india">1. Lemon market: How high are the prices of second-hand cars in India?</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Location'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="about_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `filter()`.
ℹ In argument: `Owner_Type == c("First", "Second")`.
Caused by warning in `Owner_Type == c("First", "Second")`:
! longer object length is not a multiple of shorter object length</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Year'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="about_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><br></p>
<p>There has been an increase in second-hand car prices till 2017 (though this may vary, eg. Bangladore and Delhi experienced increases earlier) but seems to be mostly coming down after that. Perhaps the problem of the lemon market is slowly being alleviated as the difference in first and second hand car prices are increasing.</p>
</section>
<section id="carbon-emissions-average-kilometers-driven-in-india" class="level3">
<h3 class="anchored" data-anchor-id="carbon-emissions-average-kilometers-driven-in-india">2. Carbon emissions? Average kilometers driven in India</h3>
<p>One outlier from Chennai removed</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Year'. You can override using the
`.groups` argument.
`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="about_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><br></p>
<iframe height="400" width="100%" frameborder="no" src="https://cc01lz-yasmineong.shinyapps.io/MyShinyApp/"> </iframe>
<p><br></p>
</section>
<section id="preferences-and-car-usage-in-india" class="level3">
<h3 class="anchored" data-anchor-id="preferences-and-car-usage-in-india">3. Preferences and car usage in India</h3>
<div class="cell">
<div class="cell-output-display">
<p><img src="about_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="cell-output-display">
<p><img src="about_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1234 rows containing non-finite values (`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="about_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><br></p>
<p>Maruti seems to be the most popular car brand that Indian consumers go for. Upon further inspection into the prices of the individual car brands, we seem to see a preference for the lowest costing car (Maruti) among the top 10.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="about_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="1">
<li>Preferences for low costs, 5-seater vehicles, lower power and engine vehicles.</li>
<li>Automatic cars seem to have higher power and engine than manual cars –&gt; More may opt for manual cars since they are of lower power and engine.</li>
<li>Cars in India do not travel very long distances.</li>
<li>Most of the histograms are highly skewed, which may lead to some poor performances of certain models.</li>
</ol>
</section>
<section id="predictors-in-the-market" class="level3">
<h3 class="anchored" data-anchor-id="predictors-in-the-market">4. Predictors in the market</h3>
<div class="cell">
<div class="cell-output-display">
<p><img src="about_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="1">
<li><p>Strongest correlation between the power and engine capacity of a car.</p></li>
<li><p>There is a strong correlation between costs and power of the car –&gt; the higher the BHP, the higher the costs of the car which matches what vehicle analytics say. However, since customers in India tend to go for lower prices, producers need not create so many high-powered cars. Moreover, India’s cities are known for their traffic congestion thus smaller, less powerful engines are practical for navigating these conditions efficient.</p></li>
<li><p>Relationship of price and engine of a car is also moderately strong. This seems to be in line with India’s taxation policies: they impose higher taxes on cars with larger engines and as a result higher BHP, making such vehicles much more unafforable.</p></li>
</ol>
<p>Link for reference: https://www.cars24.com/blog/what-is-bhp-in-cars/</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>