<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>yasmine.githhub.io - Data analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">yasmine.githhub.io</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./data_introduction.html" rel="" target="">
 <span class="menu-text">Data Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./india_car_market.html" rel="" target="">
 <span class="menu-text">India’s car market</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./data_analysis.html" rel="" target="" aria-current="page">
 <span class="menu-text">Data analysis</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#lemon-market-how-are-the-prices-of-second-hand-cars-in-india-like" id="toc-lemon-market-how-are-the-prices-of-second-hand-cars-in-india-like" class="nav-link active" data-scroll-target="#lemon-market-how-are-the-prices-of-second-hand-cars-in-india-like">1. Lemon market: How are the prices of second-hand cars in India like?</a></li>
  <li><a href="#carbon-emissions-average-kilometers-driven-in-india" id="toc-carbon-emissions-average-kilometers-driven-in-india" class="nav-link" data-scroll-target="#carbon-emissions-average-kilometers-driven-in-india">2. Carbon emissions? Average kilometers driven in India</a></li>
  <li><a href="#preferences-and-car-usage-in-india" id="toc-preferences-and-car-usage-in-india" class="nav-link" data-scroll-target="#preferences-and-car-usage-in-india">3. Preferences and car usage in India</a></li>
  <li><a href="#predictors-in-the-market" id="toc-predictors-in-the-market" class="nav-link" data-scroll-target="#predictors-in-the-market">4. Predictors in the market</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data analysis</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Here is a summary of all the variables in the dataset.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 1%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">Brand</th>
<th style="text-align: left;">Model</th>
<th style="text-align: left;">Location</th>
<th style="text-align: left;">Year</th>
<th style="text-align: left;">Car_age</th>
<th style="text-align: left;">Kilometers_Driven</th>
<th style="text-align: left;">Fuel_Type</th>
<th style="text-align: left;">Transmission</th>
<th style="text-align: left;">Owner_Type</th>
<th style="text-align: left;">Mileage_value</th>
<th style="text-align: left;">Mileage_unit</th>
<th style="text-align: left;">Engine/CC</th>
<th style="text-align: left;">Power/bhp</th>
<th style="text-align: left;">Seats</th>
<th style="text-align: left;">New_Price</th>
<th style="text-align: left;">Price</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Length:7253</td>
<td style="text-align: left;">Length:7253</td>
<td style="text-align: left;">Length:7253</td>
<td style="text-align: left;">Min. :1996</td>
<td style="text-align: left;">Min. : 5.00</td>
<td style="text-align: left;">Min. : 171</td>
<td style="text-align: left;">Length:7253</td>
<td style="text-align: left;">Length:7253</td>
<td style="text-align: left;">Length:7253</td>
<td style="text-align: left;">Min. : 0.00</td>
<td style="text-align: left;">Length:7253</td>
<td style="text-align: left;">Min. : 72</td>
<td style="text-align: left;">Min. : 34.2</td>
<td style="text-align: left;">Min. : 0.00</td>
<td style="text-align: left;">Length:7253</td>
<td style="text-align: left;">Min. : 0.44</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Class :character</td>
<td style="text-align: left;">Class :character</td>
<td style="text-align: left;">Class :character</td>
<td style="text-align: left;">1st Qu.:2011</td>
<td style="text-align: left;">1st Qu.: 8.00</td>
<td style="text-align: left;">1st Qu.: 34000</td>
<td style="text-align: left;">Class :character</td>
<td style="text-align: left;">Class :character</td>
<td style="text-align: left;">Class :character</td>
<td style="text-align: left;">1st Qu.:15.17</td>
<td style="text-align: left;">Class :character</td>
<td style="text-align: left;">1st Qu.:1198</td>
<td style="text-align: left;">1st Qu.: 75.0</td>
<td style="text-align: left;">1st Qu.: 5.00</td>
<td style="text-align: left;">Class :character</td>
<td style="text-align: left;">1st Qu.: 3.50</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Mode :character</td>
<td style="text-align: left;">Mode :character</td>
<td style="text-align: left;">Mode :character</td>
<td style="text-align: left;">Median :2014</td>
<td style="text-align: left;">Median :10.00</td>
<td style="text-align: left;">Median : 53416</td>
<td style="text-align: left;">Mode :character</td>
<td style="text-align: left;">Mode :character</td>
<td style="text-align: left;">Mode :character</td>
<td style="text-align: left;">Median :18.16</td>
<td style="text-align: left;">Mode :character</td>
<td style="text-align: left;">Median :1493</td>
<td style="text-align: left;">Median : 94.0</td>
<td style="text-align: left;">Median : 5.00</td>
<td style="text-align: left;">Mode :character</td>
<td style="text-align: left;">Median : 5.64</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Mean :2013</td>
<td style="text-align: left;">Mean :10.63</td>
<td style="text-align: left;">Mean : 58699</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Mean :18.14</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Mean :1617</td>
<td style="text-align: left;">Mean :112.8</td>
<td style="text-align: left;">Mean : 5.28</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Mean : 9.48</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">3rd Qu.:2016</td>
<td style="text-align: left;">3rd Qu.:13.00</td>
<td style="text-align: left;">3rd Qu.: 73000</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">3rd Qu.:21.10</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">3rd Qu.:1968</td>
<td style="text-align: left;">3rd Qu.:138.1</td>
<td style="text-align: left;">3rd Qu.: 5.00</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">3rd Qu.: 9.95</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Max. :2019</td>
<td style="text-align: left;">Max. :28.00</td>
<td style="text-align: left;">Max. :6500000</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Max. :33.54</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Max. :5998</td>
<td style="text-align: left;">Max. :616.0</td>
<td style="text-align: left;">Max. :10.00</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Max. :160.00</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Let’s get started!</p>
<section id="lemon-market-how-are-the-prices-of-second-hand-cars-in-india-like" class="level1">
<h1>1. Lemon market: How are the prices of second-hand cars in India like?</h1>
<div class="cell">
<div class="cell-output-display">
<p><img src="data_analysis_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div style="text-align: justify;">
<p>There has been an increase in second-hand car prices till around 2013 (though this may vary, eg. Bangladore and Delhi experienced increases earlier) but seems to be mostly coming down after that, leading to a growing difference in prices of first and second hand cars. If we were to do some predictions (predictive pricing models will not be covered here), the decreasing trend can provide a benchmark against which sellers’ asking prices can be compared. If sellers consistently ask for prices significantly higher than the predicted values for similar cars, it may indicate that they are attempting to exploit buyers’ lack of information or conceal defects in the vehicles. Thus knowing price trends can better protect consumers in the lemon market as it allows them to assess the risk associated with purchasing a used car through price signals.</p>
<p>However, if the growing difference in prices is driven by increased uncertainty and risk associated with buying used cars, it may signal a market failure that requires intervention to improve transparency and consumer protection. This widening price gap could result from a worsening lemon market problem, where buyers become increasingly wary of purchasing used cars due to concerns about hidden defects or poor quality. Therefore, there is also a need to investigate the cause of this growing price difference.</p>
</div>
<p>Now let’s see how these pricing trends may differ in different parts in India. <br></p>
<div class="cell">
<div class="cell-output-display">
<p><img src="data_analysis_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div style="text-align: justify;">
<p>In Chennai, Delhi, and Jaipur, it’s notable that price trends are still on the rise. Consumers in these areas should recognize that comparing prices of second-hand cars with those in other parts of India may not be valid. Additionally, they shouldn’t be surprised if sellers continue to offer such (second-hand) models at even higher prices.</p>
</div>
</section>
<section id="carbon-emissions-average-kilometers-driven-in-india" class="level1">
<h1>2. Carbon emissions? Average kilometers driven in India</h1>
<p>For this graph, one outlier from Chennai was removed.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="data_analysis_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div style="text-align: justify;">
<p>There is a decrease in average kilometres driven over time and generally, since less distance is covered, there should be less gas emissions (though it still depends on a variety of factors).</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="india_emissions.png" width="800" height="700" class="figure-img"></p>
<figcaption class="figure-caption">Photo from <em>Our World in Data</em> on India’s Carbon Emissions</figcaption>
</figure>
</div>
</div>
</div>
<p>If we were to assume ave_km_driven ≈ carbon emissions, this means that cars are becoming smaller contributors to the increase in global emissions as shown in the image since they display opposite trends. Moreover, it does not seem that CO2 emissions from cars will double by 2050 which means the policies in place, and the measure implemented by the government seem to be working.</p>
<p>Next, here’s a shiny app to investigate this phenomenon more closely in different cities of India.</p>
</div>
<p><br></p>
<iframe height="400" width="100%" frameborder="no" src="https://cc01lz-yasmineong.shinyapps.io/MyShinyApp/"> </iframe>
<div style="text-align: justify;">
<p>If you click through, you can see that there is all cities show a decrease in average kilometers driven throughout the years. But upon closer inspection, different cars brands contribute differently to the average distance travelled. Depending on the fuel efficiency on the brand, more can then be derived about the true emission level generated by each one of them, which can aid the government in deciding which firms to clamp down on for emission levels.</p>
</div>
</section>
<section id="preferences-and-car-usage-in-india" class="level1">
<h1>3. Preferences and car usage in India</h1>
<p><br> Here’s bar graphs of the categorical variables of this dataset.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="data_analysis_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><br> Now, let’s zoom into car brands:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="data_analysis_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div style="text-align: justify;">
<p>Maruti seems to be the most popular car brand that Indian consumers go for, seeing how it has the highest count of cars owned by Indians in all the regions (in the dataset). Let’s take a closer look into why this may be so by looking at price:</p>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="data_analysis_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div style="text-align: justify;">
<p>Upon closer examination of the prices of individual car brands, a preference for the most economical option, Maruti, is evident among the top 10. Meanwhile, brands such as Audi, BMW, and Mercedes-Benz, which command higher average prices, consequently hold a smaller market share as fewer consumers opt for them. However, their inclusion in the top 10 may suggest a significant demand among Indian consumers for luxury car brands.</p>
<p>Next, what about do the numerical variables of this dataset tell us?</p>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="data_analysis_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="1">
<li>Preferences for low costs, 5-seater vehicles, lower power and engine vehicles.</li>
<li>Automatic cars seem to have higher power and engine than manual cars –&gt; More may opt for manual cars since they are of lower power and engine.</li>
<li>Cars in India do not travel very long distances.</li>
<li>Most of the histograms are highly skewed, which may lead to some poor performances of certain models.</li>
</ol>
</section>
<section id="predictors-in-the-market" class="level1">
<h1>4. Predictors in the market</h1>
<div class="cell">
<div class="cell-output-display">
<p><img src="data_analysis_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ol type="1">
<li><p>Strongest correlation between the power and engine capacity of a car.</p></li>
<li><p>There is a strong correlation between costs and power of the car –&gt; the higher the BHP, the higher the costs of the car which matches what vehicle analytics say. However, since customers in India tend to go for lower prices, producers need not create so many high-powered cars. Moreover, India’s cities are known for their traffic congestion thus smaller, less powerful engines are practical for navigating these conditions efficient.</p></li>
<li><p>Relationship of price and engine of a car is also moderately strong. This seems to be in line with India’s taxation policies: they impose higher taxes on cars with larger engines and as a result higher BHP, making such vehicles much more unafforable.</p></li>
</ol>
<p><strong>Citations</strong>: <br> https://www.cars24.com/blog/what-is-bhp-in-cars/ <br> Ritchie, H., Roser, M., &amp; Rosado, P. (2020, May 11). <em>India: CO2 Country Profile</em>. Our World in Data. <a href="https://ourworldindata.org/co2/country/india#what-are-the-country-s-annual-co2-emissions">https://ourworldindata.org/co2/country/india#what-are-the-country-s-annual-co2-emissions</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>